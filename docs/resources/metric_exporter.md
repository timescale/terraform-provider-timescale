---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "timescale_metric_exporter Resource - timescale"
subcategory: ""
description: |-
  Schema for a metric exporter.
---

# timescale_metric_exporter (Resource)

Schema for a metric exporter.

## Example Usage

```terraform
terraform {
  required_providers {
    timescale = {
      source  = "timescale/timescale"
      version = "~> 2.6"
    }
  }
}

# Authenticate using client credentials.
# They are issued through the Timescale UI.
# When required, they will exchange for a short-lived JWT to do the calls.
provider "timescale" {
  project_id = var.ts_project_id
  access_key = var.ts_access_key
  secret_key = var.ts_secret_key
}

variable "ts_project_id" {
  type = string
}

variable "ts_access_key" {
  type = string
}

variable "ts_secret_key" {
  type      = string
  sensitive = true
}

resource "timescale_metric_exporter" "my_datadog_exporter" {
  name   = "Datadog Exporter from TF"
  region = "us-east-1"

  datadog = {
    api_key = "your_datadog_api_key_here"
    site    = "datadoghq.com" # or "datadoghq.eu", etc.
  }
}

resource "timescale_metric_exporter" "my_prometheus_exporter" {
  name   = "Prometheus Exporter from TF"
  region = "us-east-1"

  prometheus = {
    username = "prom_user"
    password = "a_very_secure_password"
  }
}

resource "timescale_metric_exporter" "my_cloudwatch_exporter_with_role" {
  name   = "CloudWatch Exporter via IAM Role from TF"
  region = "us-east-1"

  cloudwatch = {
    region          = "us-east-1"
    role_arn        = "arn:aws:iam::123456789012:role/MyMetricsExporterRole"
    log_group_name  = "/myapplication/metrics"
    log_stream_name = "exporter-stream-role"
    namespace       = "MyApplication/CustomMetrics"
  }
}

resource "timescale_metric_exporter" "my_cloudwatch_exporter_with_keys" {
  name   = "CloudWatch Exporter via Static Keys"
  region = "us-east-1"

  cloudwatch = {
    region          = "us-east-1"
    access_key      = "your_access_key_"
    secret_key      = "your_secret_keyxxxxxxxxxxxxxxxxxxxxxxxxx"
    log_group_name  = "/anotherapplication/metrics"
    log_stream_name = "exporter-stream-keys"
    namespace       = "AnotherApplication/CustomMetrics"
  }
}

# Create a service and attach one of the exporters (only 1 metric exporter can be attached at the same time)
resource "timescale_service" "metric_exporter_test" {
  name               = "metric_exporter_test"
  milli_cpu          = 1000
  memory_gb          = 4
  region_code        = "us-east-1"
  metric_exporter_id = timescale_metric_exporter.my_cloudwatch_exporter_with_keys.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Metric exporter name.
- `region` (String) Region where the exporter will be deployed. Only services running in the same region can be attached.

### Optional

- `cloudwatch` (Attributes) Configuration for AWS CloudWatch exporter. Configure authentication using either `role_arn` or `access_key` with `secret_key`. Cannot be used with `datadog` or `prometheus`. (see [below for nested schema](#nestedatt--cloudwatch))
- `datadog` (Attributes) Configuration for Datadog exporter. Cannot be used with `prometheus` or `cloudwatch`. (see [below for nested schema](#nestedatt--datadog))
- `prometheus` (Attributes) Configuration for Prometheus exporter. Cannot be used with `datadog` or `cloudwatch`. (see [below for nested schema](#nestedatt--prometheus))

### Read-Only

- `created` (String) Timestamp of when the metric exporter was created (RFC3339 format).
- `id` (String) Metric exporter ID.
- `type` (String) Type of the metric exporter. Possible values: datadog, prometheus, cloudwatch.

<a id="nestedatt--cloudwatch"></a>
### Nested Schema for `cloudwatch`

Required:

- `log_group_name` (String) Name of the CloudWatch Log Group.
- `log_stream_name` (String) Name of the CloudWatch Log Stream.
- `namespace` (String) CloudWatch Metric Namespace.
- `region` (String) AWS region for CloudWatch.

Optional:

- `access_key` (String) AWS access key ID. If provided, `secret_key` must also be set, and `role_arn` must not be set.
- `role_arn` (String) ARN of the IAM role to assume for CloudWatch access. If provided, `access_key` and `secret_key` must not be set.
- `secret_key` (String, Sensitive) AWS secret access key. If provided, `access_key` must also be set, and `role_arn` must not be set.


<a id="nestedatt--datadog"></a>
### Nested Schema for `datadog`

Required:

- `api_key` (String, Sensitive) Datadog API key.
- `site` (String) Datadog site (e.g., 'datadoghq.com', 'datadoghq.eu').


<a id="nestedatt--prometheus"></a>
### Nested Schema for `prometheus`

Required:

- `password` (String, Sensitive) Password for Prometheus basic authentication.
- `username` (String) Username for Prometheus basic authentication.
